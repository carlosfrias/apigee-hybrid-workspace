---
- name: Obtain server self report
  uri:
    url: http://localhost:{{ server_port }}/v1/servers/self
    url_username: '{{ opdk_user_email }}'
    url_password: '{{ opdk_user_pass }}'
    body_format: json
  register: self

- name: Show self type
  debug:
    msg: "self type: {{ self | type_debug }}"

- name: Show self var
  debug:
    var: self.status

- pause:

- name: Construct self report variable name
  set_fact:
    cacheable: yes
    server_uuid: '{{ self.json }}'
