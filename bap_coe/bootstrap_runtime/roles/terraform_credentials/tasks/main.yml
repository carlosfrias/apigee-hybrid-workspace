---
# tasks file for terraform_credentials
- name: Assert that TERRAFORM_PROJECT_PATH is provided
  assert:
    that:
    - TERRAFORM_PROJECT_PATH is defined
    msg: "Please provide the TERRAFORM_PROJECT_PATH"

- name: Assert that SERVICE_ACCOUNT_FILE_PATH is provided
  assert:
    that:
    - SERVICE_ACCOUNT_FILE_PATH is defined
    msg: "Please provide the SERVICE_ACCOUNT_FILE_PATH"

- name: Assert that PROJECT_ID is provided
  assert:
    that:
    - PROJECT_ID is defined
    msg: "Please provide the PROJECT_ID"

- name: Assert that GCP_REGION is provided
  assert:
    that:
    - GCP_REGION is defined
    msg: "Please provide the GCP_REGION"

- name: Assert that GCP_ZONE is provided
  assert:
    that:
    - GCP_ZONE is defined
    msg: "Please provide the GCP_ZONE"

- name: Construct version file
  template:
    src: credentials.tf.j2
    dest: "{{ TERRAFORM_PROJECT_PATH }}/credentials.tf"
    backup: yes


