---
# tasks file for python_install_minimal
- block:
  - name: Install python if necessary
    become: yes
    raw: 'type python3 >/dev/null 2>&1 || sudo apt install -y python3'
    changed_when: false

  - name: Added python3 for package manager
    become: yes
    raw: "{{ item }}"
    with_items:
      - "sudo add-apt-repository ppa:deadsnakes/ppa"
      - "sudo apt update -y"
      - "sudo apt install -y python3-apt"
      - "sudo update-alternatives --install /usr/bin/python python $(which python3) 1;"

  when: ansible_os_family == "Debian"

- name: Gather facts after python is available
  setup: