---
- name: Complete Bulk Load of Test Data for Products, Developers and Apps
  hosts: "{{ target_hosts | default('localhost') }}"
  strategy: free
  gather_facts: yes

  collections:
    - bap_coe.performance_testing
    - bap_coe.gcp_management

  roles:
    - service_account_file_processing
    - gcp_token_retrieval
#    - { role: load_product_developers_apps, ORG: "{{ PROJECT_ID }}" }
#    - { role: products_create, ORG: "{{ PROJECT_ID }}" }
    - { role: developers_create, ORG: "{{ PROJECT_ID }}" }
    - { role: developers_apps_create, ORG: "{{ PROJECT_ID }}" }
    - { role: developers_apps_keys_create, ORG: "{{ PROJECT_ID }}" }
    - { role: developers_apps_products_associate, ORG: "{{ PROJECT_ID }}" }

  vars_files:
    - ~/.apigee-secure/credentials.yml
    - ./3-properties.yml
